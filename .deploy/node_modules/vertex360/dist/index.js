var superagent=require("superagent"),Promise=require("bluebird"),Vertex=require("./vertex/Vertex"),Router=require("./vertex/Router"),local=require("./vertex/local"),graphQl=require("./graph-ql"),Microservice=function(e){e.site_id;return{app:function(e){if(Object.keys(process.env).forEach(function(e,r){-1!=e.indexOf("AWS_")&&delete process.env[e]}),delete process.env.PATH,delete process.env._HANDLER,delete process.env.LD_LIBRARY_PATH,delete process.env.LAMBDA_TASK_ROOT,delete process.env.LAMBDA_RUNTIME_DIR,"prod"==process.env.TURBO_ENV){var r=new Vertex(e);return r}var r=local.app(e);return r},router:function(){if("prod"==process.env.TURBO_ENV){var e=new Router;return e}var e=local.router();return e},graphqlServer:function(){return graphQl}}};module.exports=Microservice;